---
typora-copy-images-to: ipic
---

# 前11次commit的更新日志

## 11th 产品列表

效果图如下：

![IMG_0335](https://ws4.sinaimg.cn/large/006tNc79ly1ft2hdce2j7j30v91vonph.jpg)

幻灯片占一个屏的高度，向下翻显示产品列表，以一个个卡片的形式展现。

大标题：

 * 字号：48rpx，加粗
* 字间距：2rpx
* 底部外边距：48rpx

副标题：

	* 字号：32rpx 字间距3px 转大写

装饰边线：

 * 宽度：40px
 * 高度：2px 黑色

描述和价格：

 * 黑色，透明度0.85 ，字号32rpx



## 10th 改进：全局的网络请求

小程序的生命周期：

​	声明周期分为小程序的声明周期和页面的生命周期，小程序加载的时候会先执行小程序的生命周期onLaunch，再执行页面的生命周期onLoad。

​	小程序的生命周期函数是异步的。



同步和异步：

- 在执行完onLaunch后，程序一直等待返回值或消息，收到消息或返回值后才往下执行，这叫同步。
- 在执行完onLaunch后，程序不等待返回值或消息，就执行onLoad的代码，这叫异步。

 

异步导致的问题：

- 有时候小程序的页面的加载以后什么也不显示，因为页面需要的数据是从onLaunch的全局那里来的，它里面用了 wx.request 接口去请求了网络上的数据，这个请求是异步的，也就是很可能页面（wmlx+js）在加载完成以后，我们请求的数据还没回来 .. 这样页面也就没有可以显示的数据了。
- 解决方法（案例：宁浩汽车）：
  在onLaunch得到数据之后判断一下页面显示了没有，如果没显示就不用管了，如果显示了说明数据请求的时间太长了（来晚了），需要重新一次执行页面的数据部分，暨onLoad方法。 这个方法里用了 setData，它可以让页面重新使用得到的数据再渲染一次。

## 9th 幻灯片的按钮样式

### 实现效果

- 按钮以行内块显示
- 外边距4px，内边距：上下0 左右24px
- 背景颜色：灰色（#e0e1e2）
- 文字颜色：黑色，透明度0.6，加粗，字号32rpx
- 圆角边框：1px
- 按钮按下时，透明度0.75
- 按钮过渡效果：0.3s
- 去掉按钮边框
- 带有primary类的按钮，背景黑色，字体：白色、透明度0.9

### 知识点

#### 1. transition

对于某个元素，比如一个按钮，我们设置了按钮按下之后，透明度变成0.75，如果没有过渡效果，按下按钮的瞬间，按钮的透明度就会有变化，但如果设置了`transition`属性，比如`transition: 0.3s`，按钮有正常状态变为有透明度的状态，拉长到0.3秒。

#### 2. 伪类和伪元素

对于`::before`和`::after`来说，写2个冒号的叫做伪元素。

对于`:hover`来说，写1个冒号的叫做伪类。

##### (1) 伪元素和伪类有什么区别？

在现成的元素上添加样式，这个写法叫伪类。文档树中有这个元素。

需要添加新元素加以标识，则使用伪元素。

##### (2) `::after`和`::before`

在被选元素的里面、元素里现有内容的后（前）面插入。

需要使用`content`属性来指定要插入的内容。被插入的内容不在文档树中，仅仅是在 CSS 渲染层加入。

##### (3) 为什么使用伪元素可以去掉按钮的边框或实现其他效果？

暂不明确

## 8th 设置幻灯片的样式

通过 hero.wxss 实现。

给首页幻灯片单独添加hero类的原因：

* 其他地方可能也有幻灯片，避免影响它们
* 把这些代码抽离出来便于修改

> 为什么要写在 app.wxss 中而不是写在 index.wxss 中？

### 实现效果：

1. 图片和视频的高度都是38.2vh
2. 文字容器，顶部内边距10%
3. 文字容器居中
4. 副标题：
    * 字号32rpx；
   * 字母转大写
   * 字间距 3px
   * 底部外边距 8px
   * 颜色透明度 ：黑色，0.85
5. 大标题：
    * 字号：72rpx；
   * 加粗
   * 外边距 ： 上 0  下：8px  左右：12%
6. 描述：
   * 内边距：上下 0  左右：12%
   * 底部外边距：32px

## 7th 首页幻灯片视图

构建首页幻灯片的代码结构，有数据的地方使用模板引用。

注意：

 *  wx：for 没有写在 swiper-item 上，而是写在了 block 上。 **为什么？**
*  image 的 mode 的设置 

> mode='aspectfill'，保持纵横比缩放图片，图片只在水平或垂直方向是完整的，另一个方向会发生截取。

## 6th 首页幻灯片的数据 

在index.js 中提供 index.wxml 中需要的模板数据。

## 5th 设置容器样式（全局样式）

### 实现效果：

1. 页面背景色 F8F8F8
2. 带有section 的类，高度为 100vh

## 4th 修改默认样式

写在一个单独的wxss 文件中。

### 实现效果

1. 让图片和视频都以100%的宽度显示。
2. 设置页面的字体大小为32rpx，行高为32px

## 3rd 获取外部数据

1. 把外部数据的链接加入白名单
2. 在小程序完成初始化时，通过（ ）方法获取链接中的数据，并通过（ ）方法把获取到的数据复制到全局数据。

## 2nd 页面结构 + 数据库设计

### 实现效果

1. 顶部导航栏
   * 字样：宁浩汽车
   * 背景颜色：白
   * 导航栏标题颜色：黑
2. tab
   * 边框：白色
   * 背景颜色：#ededed
   * tab文字被选中的颜色：黑
   * tab分为首页和故事

## 1st 初始化

添加 readme 文件、忽略列表

小程序编辑器的配置文件也要同步